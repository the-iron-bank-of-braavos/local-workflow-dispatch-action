
name: CI

on:
  push:
    branches: [main,master]
    paths-ignore:
      - 'README.md'
      - 'docs/**'
  pull_request:
    branches: [main,master]
    paths-ignore:
      - 'README.md'
      - 'docs/**'

jobs: 
  test-remote-dispatch:
    name: Test remote dispatch
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: git pull origin ${{ github.ref }}
      - name: Test remote workflow dispatch
        uses: ./
        with:
          token: ${{ secrets.USER_PAT }}
          external-repository: the-iron-bank-of-braavos/poc-actions
#          repository: ${{ github.repository }}
          ref: master
          workflow: remote-nested-workflow.yml
          inputs: "{\"name\":\"Santander Remote Command Line User\", \"home\":\"CLI\" }"
      - name: Erase temp branch
        run: git branch -d temp
